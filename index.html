<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Econt Integration</title>
    <style>
        body { 
            font-family: 'Calibri', sans-serif; 
            margin: 20px; 
            text-align: center; 
            background-color: #f8f8f8; 
        }
        form { 
            max-width: 450px; 
            margin: auto; 
            padding: 30px; 
            border: 1px solid #ccc; 
            border-radius: 10px; 
            text-align: left; 
            background: white;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        label { display: block; margin-top: 10px; }
        input, select, textarea, button { width: 100%; padding: 12px; margin-top: 5px; box-sizing: border-box; }
        button { background: #ec7878; color: white; border: none; cursor: pointer; padding: 12px; font-size: 16px; margin-top: 20px; display: block; }
        button:hover { background: #d66b6b; }
        h1, h2 { text-align: center; }
        .confirmation-text { 
            margin-top: 20px; 
            font-size: 14px; 
            color: #333; 
            text-align: center; 
            max-width: 450px; 
            margin-left: auto; 
            margin-right: auto;
        }
        #price { display: none; font-weight: bold; margin-top: 10px; }
        .strikethrough { text-decoration: line-through; color: black; }
        .discount { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º —Ç–∏, —á–µ –∏–∑–±—Ä–∞ –ß–£–î–û–í–ï–©–ò!</h1>
    <h2>üõí –ö–æ–ª–∏—á–∫–∞</h2>
    <form id="checkoutForm" action="https://formspree.io/f/xvgkgrzb" method="POST">
        <label for="name">–ò–º–µ –∏ –§–∞–º–∏–ª–∏—è:</label>
        <input type="text" id="name" name="name" required>

        <label for="email">–ò–º–µ–π–ª:</label>
        <input type="email" id="email" name="email" required>

        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
        <input type="tel" id="phone" name="phone" required>

        <label for="shipping">–ò–∑–±–µ—Ä–µ—Ç–µ –Ω–∞—á–∏–Ω –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞:</label>
        <select id="shipping" name="shipping" required>
            <option value="" disabled selected>–ò–∑–±–µ—Ä–µ—Ç–µ –Ω–∞—á–∏–Ω</option>
            <option value="office">–î–æ –æ—Ñ–∏—Å –Ω–∞ Econt + 10–ª–≤</option>
            <option value="home">–î–æ –∞–¥—Ä–µ—Å + 12–ª–≤</option>
        </select>

        <label for="office">–û—Ñ–∏—Å –Ω–∞ Econt:</label>
        <input type="text" id="office" name="office" placeholder="–í—ä–≤–µ–¥–∏ –Ω–æ–º–µ—Ä –Ω–∞ –æ—Ñ–∏—Å –∏–ª–∏ –∞–¥—Ä–µ—Å" required disabled>

        <label for="address">–ê–¥—Ä–µ—Å (–∞–∫–æ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ):</label>
        <input type="text" id="address" name="address" placeholder="–í—ä–≤–µ–¥–∏ —Ç–≤–æ—è –∞–¥—Ä–µ—Å" required disabled>

        <label for="color">–ò–∑–±–µ—Ä–∏ —Ü–≤—è—Ç:</label>
        <select id="color" name="color" required>
            <option value="" disabled selected>–ò–∑–±–µ—Ä–µ—Ç–µ —Ü–≤—è—Ç</option>
            <option value="–¢—é—Ä–∫–æ–∞–∑">–¢—é—Ä–∫–æ–∞–∑</option>
            <option value="–ì–æ—Ä—á–∏—Ü–∞">–ì–æ—Ä—á–∏—Ü–∞</option>
            <option value="–†–æ–∑–æ–≤">–†–æ–∑–æ–≤</option>
        </select>

        <p id="price">–¶–µ–Ω–∞: 820–ª–≤</p>

        <label for="payment">–ù–∞—á–∏–Ω –Ω–∞ –ø–ª–∞—â–∞–Ω–µ:</label>
        <select id="payment" name="payment" required>
            <option value="cod">–ù–∞–ª–æ–∂–µ–Ω –ø–ª–∞—Ç–µ–∂</option>
        </select>

        <label for="notes">–ë–µ–ª–µ–∂–∫–∏:</label>
        <textarea id="notes" name="notes" placeholder="–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"></textarea>

        <!-- Hidden inputs to store price data -->
        <input type="hidden" id="basePrice" name="basePrice" value="820">
        <input type="hidden" id="shippingCost" name="shippingCost" value="0">
        <input type="hidden" id="finalPrice" name="finalPrice" value="820">

        <button type="submit">–ü–æ—Ç–≤—ä—Ä–¥–∏ –ø–æ—Ä—ä—á–∫–∞—Ç–∞</button>
        <div id="summary-box" style="margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 10px; background: #fff; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1); display: none;">
            <h3>–û–±–æ–±—â–µ–Ω–∏–µ</h3>
            <p id="selected-color">–¶–≤—è—Ç: -</p>
            <p id="selected-shipping">–î–æ—Å—Ç–∞–≤–∫–∞: -</p>
            <p id="final-price" style="font-weight: bold;">–û–±—â–∞ —Ü–µ–Ω–∞: -</p>
        </div>
    </form>
    
    <p class="confirmation-text">–©–µ –ø–æ–ª—É—á–∏—à –º–µ–π–ª —Å –ø–æ—Ç–≤—ä—Ä–¥–µ–Ω–∏–µ –∑–∞ —Ç–≤–æ—è—Ç–∞ –ø—Ä–∞—Ç–∫–∞</p>

    <script>
        function updateSummary() {
            const color = document.getElementById('color').value;
            const shipping = document.getElementById('shipping').value;
            const summaryBox = document.getElementById('summary-box');
            const colorText = document.getElementById('selected-color');
            const shippingText = document.getElementById('selected-shipping');
            const finalPriceText = document.getElementById('final-price');
            let basePrice = color === '–ì–æ—Ä—á–∏—Ü–∞' ? 780 : color ? 820 : 0;
            let shippingCost = shipping === 'home' ? 12 : shipping === 'office' ? 10 : 0;
            let totalPrice = basePrice + shippingCost || '-';
            
            // Update hidden fields
            document.getElementById('basePrice').value = basePrice;
            document.getElementById('shippingCost').value = shippingCost;
            document.getElementById('finalPrice').value = totalPrice;

            colorText.innerHTML = '–¶–≤—è—Ç: ' + (color || '-');
            shippingText.innerHTML = '–î–æ—Å—Ç–∞–≤–∫–∞: ' + (shipping ? (shipping === 'home' ? '–î–æ –∞–¥—Ä–µ—Å +12–ª–≤' : '–î–æ –æ—Ñ–∏—Å +10–ª–≤') : '-');
            finalPriceText.innerHTML = '–û–±—â–∞ —Ü–µ–Ω–∞: ' + totalPrice + '–ª–≤';
            summaryBox.style.display = 'block';
        }

        document.getElementById('shipping').addEventListener('change', function() {
            const officeField = document.getElementById('office');
            const addressField = document.getElementById('address');
            if (this.value === 'office') {
                officeField.disabled = false;
                addressField.disabled = true;
                addressField.value = ''; // Clear address field if switching to office
            } else if (this.value === 'home') {
                addressField.disabled = false;
                officeField.disabled = true;
                officeField.value = ''; // Clear office field if switching to home
            }
            updateSummary(); // Update summary when shipping method changes
        });

        document.getElementById('color').addEventListener('change', function() {
            updateSummary();
            const priceElement = document.getElementById('price');
            priceElement.innerHTML = this.value === '–ì–æ—Ä—á–∏—Ü–∞' ? '–¶–µ–Ω–∞: <span class="strikethrough">820–ª–≤</span> <span class="discount">780–ª–≤</span>' : '–¶–µ–Ω–∞: 820–ª–≤';
            priceElement.style.display = 'block';
        });

        document.getElementById('checkoutForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission
            alert('–ü–æ—Ä—ä—á–∫–∞—Ç–∞ –µ –ø—Ä–∏–µ—Ç–∞'); // Show the alert message

            // Send the form data to Formspree
            const formData = new FormData(this);
            fetch(this.action, {
                method: this.method,
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    alert('–£—Å–ø–µ—à–Ω–æ –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ!');
                } else {
                    alert('–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞. –ú–æ–ª—è, –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.');
                }
            }).catch(error => {
                alert('–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞. –ú–æ–ª—è, –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.');
            });
        });
    </script>
</body>
</html>
